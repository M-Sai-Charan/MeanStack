<div *ngIf="showEnvelope" class="envelope-container">
  <svg id="envelope-svg" viewBox="0 0 1124 788">
    <g id="dribble-invitation">
      <polygon id="envelop-top" class="st6"
        points="798.6,388.1 548.9,227.4 299.3,388.1 299.2,388.1 299.2,697.8 798.9,697.8 798.9,388.1" />
      <g id="invitation">
        <defs>
          <linearGradient id="olpGradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#f7c46c; stop-opacity:1" />
            <stop offset="100%" style="stop-color:#f2a33c; stop-opacity:1" />
          </linearGradient>
          <filter id="textShadow" x="-50%" y="-50%" width="200%" height="200%">
            <feDropShadow dx="0" dy="2" stdDeviation="2" flood-color="black" flood-opacity="0.4" />
          </filter>
        </defs>

        <!-- Add this within <g id="invitation"> -->
        <text x="548.8" y="400" font-size="64" text-anchor="middle" fill="url(#olpGradient)" filter="url(#textShadow)"
          font-weight="bold" font-family="'Josefin Sans', sans-serif">
          O L P
        </text>

      </g>
      <ellipse class="st2" cx="548.8" cy="698" rx="301" ry="17" />
      <g id="envelop-bottom">
        <polygon class="st3" points="798.9,388.1 798.9,697.8 299.2,697.8 			" />
        <polygon class="st7" points="299.2,388.1 299.2,697.8 798.9,697.8 			" />
      </g>
      <g id="notice">
        <path id="circle" class="st0" d="M832.5,403.3c0,22.4-18.2,40.6-40.6,40.6c-22.4,0-40.6-18.2-40.6-40.6c0-22.4,18.2-40.6,40.6-40.6
					C814.3,362.7,832.5,380.9,832.5,403.3z" />
        <path id="number" class="st8" d="M799.8,410.6v3.9h-14.9v-3.9h5.6v-13.7c-0.2,0.3-0.6,0.6-1.1,1c-0.5,0.3-1.1,0.7-1.7,0.9
					s-1.2,0.5-1.9,0.7c-0.7,0.2-1.2,0.3-1.7,0.3v-4c0.5,0,1.1-0.2,1.8-0.5c0.7-0.3,1.4-0.7,2-1.1c0.7-0.4,1.2-0.8,1.7-1.3
					c0.5-0.4,0.8-0.7,0.9-0.9h4.4v18.5H799.8z" />

        <line class="line up" x1="838.5" y1="360.7" x2="850.7" y2="349.6" />
        <line class="line up" x1="729.4" y1="404.7" x2="712.6" y2="405.4" />
        <line class="line up" x1="753.5" y1="357.3" x2="741.9" y2="346.6" />

        <line class="line down" x1="742.9" y1="464.7" x2="756.1" y2="452.4" />
        <line class="line down" x1="842.7" y1="458.9" x2="829.9" y2="446.9" />
        <line class="line down" x1="869.4" y1="404" x2="854" y2="404.8" />
      </g>
    </g>
  </svg>
  <!-- <div class="invitation-letter" [class.show]="letterVisible">
    <h1>{{ enquiry?.Bride }} <span class="heart">❤️</span> {{ enquiry?.Groom }}</h1>
  </div> -->
</div>
<div *ngIf="!showEnvelope" class="wedding-template-container">
  <h1>{{ enquiry?.Bride }} <span class="heart">❤️</span> {{ enquiry?.Groom }}</h1>

  <div class="section" style="position: relative;">
    <div class="template-logo" style="position: absolute;left: 95%">
      <img src="/olp-logo.png" alt="Logo" style="width: 100px;" />
    </div>
  </div>

  <div class="section">
    <div class="details-grid">
      <p><strong>Location:</strong> {{ enquiry?.Location }}</p>
      <p><strong>Contact:</strong> {{ enquiry?.ContactNumber }}</p>
      <p><strong>Email:</strong> {{ enquiry?.Email }}</p>
      <p><strong>OLPID:</strong> {{ enquiry?.OLPID }}</p>
    </div>
  </div>

  <div class="section about">
    <h2>About Us</h2>
    <p>
      We are passionate photographers, dedicated to creating the finest memories and giving emotional value to your
      special day. From haldi to reception, we preserve your moments with artistic storytelling.
    </p>
  </div>

  <div class="section">
    <h2>Our Work</h2>
    <div id="wrapper">
      <div id="top-oval"></div>
      <div id="strip-w">
        <div id="strip-track">
          <div class="strip-item" *ngFor="let img of galleryImages.concat(galleryImages)"
            [ngStyle]="{ 'background-image': 'url(' + img + ')' }"></div>
        </div>
      </div>
      <div id="bottom-oval"></div>
    </div>
  </div>

  <div class="section">
    <h2>Wedding Events</h2>
    <div class="event-grid">
      <div class="event-card" *ngFor="let event of enquiry?.Events">
        <div class="event-header">
          <h4>{{ event.EventName }}</h4>
          <div class="event-detail"><i class="pi pi-calendar"></i> {{ event.EventDate | date:'mediumDate' }}</div>
          <div class="event-detail"><i class="pi pi-clock"></i> {{ event.EventTime }}</div>
          <div class="event-detail"><i class="pi pi-map-marker"></i> {{ event.EventLocation }}</div>
          <div class="event-detail"><i class="pi pi-users"></i> {{ event.EventGuests }} Guests</div>
          <div class="event-price">₹ {{ event.FinalApprovedAmount | number }}</div>
        </div>
      </div>
    </div>

  </div>

  <div class="section total">
    <h3>Grand Total:</h3>
    <div class="total-badge">₹ {{ totalInvoiceAmount | number }}</div>
  </div>

  <div class="section">
    <h2>Terms & Conditions</h2>
    <ul class="terms">
      <li>50% advance payment required.</li>
      <li>Final payment before delivery.</li>
      <li>Travel & stay not included (if outstation).</li>
      <li>This estimate is valid for 48 hours only.</li>
    </ul>
  </div>

  <div class="button-row">
    <button class="btn-approve" (click)="approveEstimate()">Approve Estimate</button>
    <button class="btn-reject" (click)="rejectEstimate()">Request Changes</button>
  </div>
</div>